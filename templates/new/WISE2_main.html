{% extends 'new/new_base.html' %}

{% block content %}
    <div class="main-panel">

<!--MAIN CONTENT DIV -->

<div class="content">
        <div class="container-fluid">
            <div class="card">
                <div class="header">
                    <h4 class="title">City Overview Map:</h4>
                    <p class="category">Presents the overall city's trash-bins at their location, according to their status</p>
                    <br>
                </div>
                    <div class="row">
                        <div class="container-fluid text-center">
                            <div id="map" style="width: 90%; margin: 0 auto; height: 550px;"></div>
                        </div>
                   <!-------------------------------------------------------------------------------------------->         
                        <br> <p class="category text-center">Here is a subtitle for this part of filtering to explain more</p>
                                               <br> <p class="category text-center">Here is a subtitle for this part of filtering to explain more</p>

                        <div class="text-center">
<!--form-->             <form action = "/new_index" method = "POST">
                            <!--first-->
                            <div class="col-md-4">
                                <div class="content" >
<!--                                    <input type="radio" name="optradio" value="capacity" checked><label class="radio-inline">By Capacity</label></input>-->
                                    <div class="text-center" >  <hr> <h4><b> By Capacity:</b></h4></div>
                                    <div class="form-check text-left" id="filterCapacity">
                                        <input type="checkbox" class="form-check-input" name="empty_Bins" {{capacity_empty|safe}}>
                                        <label class="form-check-label" id="25">0% - 25% </label>
                                        <br>
                                        <input type="checkbox" class="form-check-input" name="mid_Bins" {{capacity_mid|safe}}>
                                        <label class="form-check-label" id="75">26% - 75% </label>
                                        <br>
                                        <input type="checkbox" class="form-check-input" name="full_Bins" {{capacity_full|safe}}>
                                        <label class="form-check-label" id="100">76% - 100% </label>
                                    </div>
                                </div>
                            </div>
                            <!--second-->
                            <div class="col-md-4">
                                <div class="content" >
<!--                                    <input type="radio" name="optradio" value="threshold"><label class="radio-inline">By Threshold</label></input>-->
 <div class="text-center" >  <hr> <h4><b> By Threshold:</b></h4></div>
                                    <div class="form-check text-left" id="filterTrashold">
                                    <input type="checkbox" class="form-check-input" name="over_trashold" {{over_trashold|safe}}>
                                    <label class="form-check-label">Over Threshold</label>
                                    <br>
                                    <input type="checkbox" class="form-check-input" name="below_trashold" {{below_trashold|safe}}>
                                    <label class="form-check-label">Below Threshold</label>
                                </div>
                                </div>
                            </div>
                            <!--thered-->
                             <div class="col-md-4">
                                <div class="content" >
<!--                                    <input type="radio" name="optradio" value="status"><label class="radio-inline">By Sensors Status</label></input>-->
 <div class="text-center" >  <hr> <h4><b> By Status:</b></h4></div>
                                 <div class="form-check text-left" id="filterStatus">
                                    <input type="checkbox" class="form-check-input" name="ConnectedBins" {{ConnectedBins|safe}}>
                                    <label class="form-check-label">Connected Bins</label>
<br>
                                    <input type="checkbox" class="form-check-input" name="FailedBins" {{FailedBins|safe}}>
                                    <label class="form-check-label">Failed Bins</label>
                                     <br>
                                </div>
                            </div>
                            <div class="text-center">
                            <br>
                                   <input type = "submit" class="btn btn-info btn-fill " value = "Apply Filters" />
                                   <br>
                              <br>
                                 <a type="submit" href="/new_index" class="btn btn-info">Reset Filters</a>
                             </div>
                        </form>
<!--end form-->

            </div>
        </div>
    </div>

<!--End of Filtering Map-->
<!--BELOW MAP - TABLE CONTENT: -->

        <div class="content">
            <div class="container-fluid">
                <div class="row">
                        <div class="col-md-12">
                                <div class="card card-plain">
                                    <div class="header">
                                        <h4 class="title">Table on Plain Background</h4>
                                        <p class="category">Here is a subtitle for this table</p>
                                    </div>
                                    <div class="content table-responsive table-full-width">
                                            <table class="table table-hover">
                                                    <thead>
                                                        <th>Bin ID</th>
                                                        <th>Location</th>
                                                        <th>Volume</th>
                                                        <th>Status</th>
                                                        <th>Last Serviced</th>
                                                    </thead>
                                                {% for sensor_low in sensors_low %}
                                                <TR>
                                                   <TD>{{sensor_low[0]}}</TD> <!-- id!-->
                                                   <TD>{{sensor_low[1]}}</TD> <!-- address!-->
                                                   <TD>{{sensor_low[2]}}%</TD> <!-- volume!-->
                                                   <TD >low</TD>             <!-- avg fill!-->
                                                   <TD>{{sensor_low[6]}}</TD>   <!-- last serived!-->
                                                </TR>
                                                {% endfor %}
                                                {% for sensor_mid in sensors_mid %}
                                                <TR>
                                                   <TD>{{sensor_mid[0]}}</TD> <!-- id!-->
                                                   <TD>{{sensor_mid[1]}}</TD> <!-- address!-->
                                                   <TD>{{sensor_mid[2]}}%</TD> <!-- volume!-->
                                                   <TD style="color: orange">Medium</TD>             <!-- avg fill!-->
                                                   <TD>{{sensor_mid[6]}}</TD>   <!-- last serived!-->
                                                </TR>
                                                {% endfor %}
                                                {% for sensor_full in sensors_full %}
                                                <TR>
                                                   <TD>{{sensor_full[0]}}</TD> <!-- id!-->
                                                   <TD>{{sensor_full[1]}}</TD> <!-- address!-->
                                                   <TD>{{sensor_full[2]}}%</TD> <!-- volume!-->
                                                   <TD style="color: red">Full</TD>             <!-- avg fill!-->
                                                   <TD>{{sensor_full[6]}}</TD>   <!-- last serived!-->
                                                </TR>
                                                {% endfor %}
                                                </tbody>
                                                </table>
                                                <a type="submit" class="btn btn-info btn-fill pull-center" href="/download/filtered" download="./export.csv">Download filtered bins list (CSV file)</a>
                                                <a type="submit" class="btn btn-info btn-fill pull-center" href="/download/full" download="./export.csv">Download the full bins list (CSV file)</a>

        
                                    </div>
                                </div>
                            </div>
                </div>
            </div>
        </div>

<!--END OF TABLE-->
<!--MAIN CONTENT DIV -->
   </div>
</div>


{% endblock %}

{% block script %}

    <script src="static/assets/js/maps.js"></script>
    <script type="text/javascript">
        window.locations = {{sensors | safe}};
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLT0yiIBSyM_l0PvIp7cH1rbPnfPfcETM&callback=initMap">
    </script>

	 <!--   Core JS Files   -->
    <script src="static/assets/js/jquery.3.2.1.min.js" type="text/javascript"></script>
	<script src="static/assets/js/bootstrap.min.js" type="text/javascript"></script>

	<!--  Charts Plugin -->
	<script src="static/assets/js/chartist.min.js"></script>

    <!--  Notifications Plugin    -->
    <script src="static/assets/js/bootstrap-notify.js"></script>

    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLT0yiIBSyM_l0PvIp7cH1rbPnfPfcETM"></script>

    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
	<script src="static/assets/js/light-bootstrap-dashboard.js?v=1.4.0"></script>

	<!-- Light Bootstrap Charts and maps JS -->
	<script src="static/assets/js/charts-main.js"></script>
        <script type="text/javascript">
    	$(document).ready(function(){

        	charts.initChartist();

        	$.notify({
            	icon: 'pe-7s-bell',
            	message: "Welcome to <b>WiseTrash Dashboard</b> - here we will present information abput the page utitlity."

            },{
                type: 'info',
                timer: 4000
            });

    	});
	</script>

{% endblock %}
