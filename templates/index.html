{% extends 'new_base.html' %}
{% block main %}active{% endblock %}

{% block content %}
    <div class="main-panel">
             <nav class="navbar navbar-default navbar-fixed">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
                        <span class="sr-only"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">City Overview</a>
                </div>
                <div class="collapse navbar-collapse">
                </div>
            </div>
        </nav>

<!--MAIN CONTENT DIV -->

<div class="content">
        <div class="container-fluid">
            <div class="card">
                <div class="header">
                    <h4 class="title">City Overview Map:</h4>
                    <p class="category">Presents the overall city's trash-bins at their location, according to their status</p>
                    <br>
                </div>
                    <div class="row">
                        <div class="container-fluid text-center">
                            <div id="map" style="width: 90%; margin: 0 auto; height: 550px;"></div>
                        </div>
                   <!-------------------------------------------------------------------------------------------->         
                        <br> <p class="category text-center">Here is a subtitle for this part of filtering to explain more</p>
                        <div class="text-left">
<!--form-->             <form action = "/main" method = "POST">



    <div class="row center-block">
    <!--first-->
    <div class="col-md-3 center-block">
        <div class="content" >
<label>  <hr> <h4 class="card-title"><b> By Capacity:</b></h4></label>
            <div class="form-check " id="filterCapacity">
                <div>
                    <input type="checkbox" class="form-check-input" name="empty_Bins" {{capacity_empty|safe}}>
                    <label class="form-check-label" id="25">0% - 25% </label>
                </div>
                <div>
                    <input type="checkbox" class="form-check-input" name="mid_Bins" {{capacity_mid|safe}}>
                    <label class="form-check-label" id="75">26% - 75% </label>
                </div>
                <div>
                    <input type="checkbox" class="form-check-input" name="full_Bins" {{capacity_full|safe}}>
                    <label class="form-check-label" id="100">76% - 100% </label>
                </div>
            </div>
        </div>
    </div>
    <!--second-->



    <div class="col-md-3 center-block">
        <div class="content" >
<label>  <hr> <h4><b> By Threshold:</b></h4></label>
        <div class="form-check " id="filterTrashold">
            <div>
                <input type="checkbox" class="form-check-input" name="over_trashold" {{over_trashold|safe}}>
                <label class="form-check-label">Over Threshold</label>
            </div>
            <div>
                <input type="checkbox" class="form-check-input" name="below_trashold" {{below_trashold|safe}}>
                <label class="form-check-label">Below Threshold</label>
            </div>
        </div>
        </div>
    </div>
    <!--thered-->



     <div class="col-md-3 center-block">
        <div class="content" >
<label>  <hr> <h4><b> By Status:</b></h4></label>
         <div class="form-check " id="filterStatus">
             <div>
                <input type="checkbox" class="form-check-input" name="ConnectedBins" {{ConnectedBins|safe}}>
                <label class="form-check-label">Connected Bins</label>
             </div>
             <div>
                <input type="checkbox" class="form-check-input" name="FailedBins" {{FailedBins|safe}}>
                <label class="form-check-label">Failed Bins</label>
             </div>
        </div>
    </div>
</div>



<br><br><br>
<div class="row center-block">
        <div class="col-md-3 center-block">
    <br>
           <input type = "submit" class="btn btn-info btn-fill " value = "Apply Filters" />
           <br>
      <br>
         <a type="submit" href="/new_index" class="btn btn-info">Reset Filters</a>

    </div>
</div>

</form>
<!--end form-->




            </div>
        </div>
    </div>

<!--End of Filtering Map-->
<!--BELOW MAP - TABLE CONTENT: -->

        <div class="content  center-block">
            <div class="container-fluid  center-block">
                <div class="col-md-6 center-block">
                    <label>Presented <b>{{persent_count|safe}}</b> TrashBins out of <b>{{total_count|safe}}</b> total trash bins in the system</label>
                </div>
                <div class="row">
                        <div class="col-md-12">
                                <div class="card card-plain">
                                    <div class="content table-responsive table-full-width">
                                    <a type="submit" class="btn btn-info btn-fill pull-center" href="/download/filtered" download="./export.csv">Download filtered bins(CSV file)</a>
                                    <a type="submit" class="btn btn-info btn-fill pull-center" href="/download/full" download="./export.csv">Download full bins(CSV file)</a>
                                    </div>
                                </div>
                            </div>
                </div>
            </div>
        </div>

<!--END OF TABLE-->
<!--MAIN CONTENT DIV -->
   </div>
</div>
    </div>

{% endblock %}

{% block script %}

    <script src="static/assets/js/maps.js"></script>
    <script type="text/javascript">
        window.locations = {{sensors | safe}};
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLT0yiIBSyM_l0PvIp7cH1rbPnfPfcETM&callback=initMap">
    </script>
    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
	<script src="static/assets/js/light-bootstrap-dashboard.js?v=1.4.0"></script>

{% endblock %}
